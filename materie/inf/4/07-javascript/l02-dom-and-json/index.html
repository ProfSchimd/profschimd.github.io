<!doctype html><html><head><meta charset=utf-8><title>Laboratorio 2: Utilizzo di un JSON per creare un DOM &ndash; Michele Schimd
</title><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://cdn.jsdelivr.net/npm/bootswatch@4.5.2/dist/spacelab/bootstrap.min.css rel=stylesheet><link href=https://profschimd.github.io/css/syntax.css rel=stylesheet><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css><script src=https://code.jquery.com/jquery-3.4.1.slim.min.js integrity=sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n crossorigin=anonymous></script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></head><body class="d-flex flex-column min-vh-100"><header><nav class="p-1 navbar navbar-expand-lg navbar-dark bg-primary"><div class=container><a class=navbar-brand rel=author href=https://profschimd.github.io/>Michele Schimd</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav ml-auto"><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# role=button data-bs-toggle=dropdown aria-expanded=false>Materie</a><ul class=dropdown-menu aria-labelledby=navbarDropdown><li><a href=https://profschimd.github.io/materie/inf/ class=dropdown-item>Informatica</a></li><li><a href=https://profschimd.github.io/materie/sr/ class=dropdown-item>SR</a></li><li><a href=https://profschimd.github.io/materie/tpsit/ class=dropdown-item>TPSIT</a></li><li><a href=https://profschimd.github.io/materie/gpoi/ class=dropdown-item>GPOI</a></li><li><a href=https://profschimd.github.io/materie/ec/ class=dropdown-item>EC</a></li><li><a href=https://profschimd.github.io/materie/python/ class=dropdown-item>Python</a></li></ul></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# role=button data-bs-toggle=dropdown aria-expanded=false>Classi</a><ul class=dropdown-menu aria-labelledby=navbarDropdown><li><a href=https://profschimd.github.io/classi/3ic/ class=dropdown-item>3IC</a></li><li><a href=https://profschimd.github.io/classi/4ic/ class=dropdown-item>4IC</a></li><li><a href=https://profschimd.github.io/classi/4ia/ class=dropdown-item>5IA</a></li><li><a href=https://profschimd.github.io/classi/5ic/ class=dropdown-item>5IC</a></li><li><a href=https://profschimd.github.io/classi/anni-passati/ class=dropdown-item>Anni precedenti</a></li></ul></li><li class=nav-item><a class=nav-link href=https://profschimd.github.io/about/ role=button><i class="bi bi-info-circle"></i></a></li></ul></div></div></nav></header><div class="p-4 bg-primary" style="background-size:cover;background-position:50%;background-image:linear-gradient(to bottom,rgba(0,0,0,.3) 0%,rgba(0,0,0,.6) 100%),url(https://profschimd.github.io/img/zuccante_it.jpeg)"><div class=container><h1 class="display-4 text-white">Laboratorio 2: Utilizzo di un JSON per creare un DOM</h1></div></div><div class=bg-light><nav aria-label="breadcrumb mt-0"><div class=container><ol class="breadcrumb py-0 my-1 small"><li class=breadcrumb-item><a href=https://profschimd.github.io/>Home</a></li><li class=breadcrumb-item><a href=https://profschimd.github.io/materie/>Materie</a></li><li class=breadcrumb-item><a href=https://profschimd.github.io/materie/inf/>Informatica</a></li><li class=breadcrumb-item><a href=https://profschimd.github.io/materie/inf/4/>Quarto anno</a></li><li class=breadcrumb-item><a href=https://profschimd.github.io/materie/inf/4/07-javascript/>Javascript</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://profschimd.github.io/materie/inf/4/07-javascript/l02-dom-and-json/>Laboratorio 2: Utilizzo di un JSON per creare un DOM</a></li></ol></nav></div><div class="container py-5"><main><div class=row><div class=col-10><aside><nav id=TableOfContents><ul><li><a href=#struttura-del-json>Struttura del JSON</a></li><li><a href=#recuperare-file-con-fetch>Recuperare file con <code>fetch</code></a><ul><li><a href=#promise><code>Promise</code></a></li><li><a href=#gestione-degli-errori-con-promise>Gestione degli errori con <code>Promise</code></a></li></ul></li><li><a href=#interfaccia-javascript-per-il-dom>Interfaccia Javascript per il DOM</a><ul><li><a href=#accesso-al-dom>Accesso al DOM</a></li><li><a href=#manipolazione-del-dom>Manipolazione del DOM</a></li><li><a href=#gestione-dello-stile-via-javascript>Gestione dello stile via Javascript</a></li></ul></li><li><a href=#interazione>Interazione</a><ul><li><a href=#gestione-eventi>Gestione eventi</a></li><li><a href=#implementazione-dellevent-listener>Implementazione dell&rsquo;<em>event listener</em></a></li></ul></li><li><a href=#riassunto-metodi-manipolazione-dom>Riassunto metodi manipolazione DOM</a></li><li><a href=#riferimenti>Riferimenti</a></li></ul></nav></aside></div><div class=col-2><a class="btn btn-outline-primary my-1 w-100" href=https://github.com/ProfSchimd/teaching-material/tree/main/inf/javascript/json-dom role=button target=_blank><i class="bi bi-github"></i> Source</a></div></div><article><div class=container style=text-align:justify><h2 id=struttura-del-json>Struttura del JSON</h2><p>Ricordiamo che un JSON è una rappresentazione <em>strutturata</em> di dati, in questo
laboratorio utilizzeremo un file JSON sintetico un cui estratto è riportato di
seguito (l&rsquo;intero file si può trovare nel repository online)</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;products&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;Smartphone Samsung Galaxy S21&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;Smartphone Samsung Galaxy S21 5G 128GB Phantom Gray&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;price&#34;</span><span class=p>:</span> <span class=mf>999.99</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;stock&#34;</span><span class=p>:</span> <span class=mi>10</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;pictures&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;./images/samsung_galaxy_s21_1.jpg&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;./images/samsung_galaxy_s21_2.jpg&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;Laptop Dell XPS 13&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;Laptop Dell XPS 13 9310 13.4-inch FHD+ Touch Laptop&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;price&#34;</span><span class=p>:</span> <span class=mf>1399.99</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;stock&#34;</span><span class=p>:</span> <span class=mi>5</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;pictures&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;./images/dell_xps_13_1.jpg&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;./images/dell_xps_13_2.jpg&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;./images/dell_xps_13_3.jpg&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;./images/dell_xps_13_4.jpg&#34;</span>
</span></span><span class=line><span class=cl>            <span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=recuperare-file-con-fetch>Recuperare file con <code>fetch</code></h2><p>Vediamo ora come recuperare un file JSON mediante Javascript, tale file può
trovarsi ad un URL qualsiasi, tuttavia è necessario che il server che ospita tale
file abiliti il meccanismo di <em>Cross-Origin Resource Sharing (CORS)</em> altrimenti
la richiesta verrà bloccata.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>jsonUrl</span> <span class=o>=</span> <span class=s1>&#39;https://...&#39;</span><span class=p>;</span> 
</span></span><span class=line><span class=cl><span class=nx>fetch</span><span class=p>(</span><span class=nx>jsonUrl</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=nx>res</span> <span class=p>=&gt;</span> <span class=nx>res</span><span class=p>.</span><span class=nx>json</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=nx>json</span> <span class=p>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>json</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=k>catch</span><span class=p>(</span><span class=nx>err</span> <span class=p>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>err</span><span class=p>));</span>
</span></span></code></pre></div><p>Vale la pena notare che:</p><ul><li>il metodo <code>then</code> accetta come parametro una funzione, nell&rsquo;esempio si sono
usate <em>arrow function</em>, ma questo non è il solo modo;</li><li>è stata utilizzata una sequenza di chiamate <code>.then</code> <code>.catch</code> per gestire
l&rsquo;intera catena di operazione: scarica JSON, elabora JSON cattura eventuali
errori.</li></ul><h3 id=promise><code>Promise</code></h3><p>Il codice sopra mostra l&rsquo;utilizzo della <em>funzione asincrona</em> <code>fetch</code> che permette
di fare una richiesta HTTP senza bloccare il normale flusso (per eseguire la
richiesta viene creato un <a href=https://profschimd.github.io/materie/tpsit/4/01-processi-thread/processi-e-thread/>thread</a> apposito).</p><p>La funzione <code>fetch</code> restituisce un oggetto di tipo <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise target=_blank rel=noopener><code>Promise</code></a> che rappresenta
una &ldquo;promessa&rdquo; di terminazione di una sequenza di istruzioni che produce
un risultato o un errore. Quando la promise
termina, la funzione che gli viene agganciata mediante il metodo <code>then</code> viene
eseguita. Il parametro passato a questa funzione (chiamato <code>res</code> nell&rsquo;esempio
sopra) rappresenta l&rsquo;esito della richiesta.</p><p>Nell&rsquo;esempio sopra è stato utilizzato il metodo <code>json()</code> della classe <code>Response</code>
(che è la classe della risposta ad un fetch). La caratteristica interessante di
tale metodo è che anche esso restituisce un <code>Promise</code> ed è quindi possibile
creare una <em>catena</em> di <em>promises</em> utilizzando una seconda volta <code>then</code>, in questo
secondo utilizzo il parametro è l&rsquo;oggetto JSON decodificato che è ora disponibile
per essere processato (nell&rsquo;esempio se esegue una semplice stampa sulla console).</p><h3 id=gestione-degli-errori-con-promise>Gestione degli errori con <code>Promise</code></h3><p>È sempre buona norma gestire eventuali situazioni di errori, normalmente si
notifica l&rsquo;utente che qualcosa è andato storno e si mostra una pagine contenente
tale comunicazione (con eventuali azioni che l&rsquo;utente può intraprendere).</p><p>Quando si utilizzano i <code>Promise</code>, gli errori possono verificarsi in maniera
asincrona, ad esempio la richiesta per il JSON fa in <em>timeout</em> (magari il link
inserito non è corretto). Per gestire situazioni di errori, si usa l metodo
<code>catch</code> alla fine della catena di promise. Questo metodo richiede una funzione
come parametro alla quale verrà passato l&rsquo;errore (nell&rsquo;esempio sopra l&rsquo;errore
viene stampato sulla console).</p><div class="alert alert-primary" markdown=1><h5 class=no_toc><i class="bi bi-pencil-square"></i> Esercizio</strong></h5><p><p>Creare un progetto con un file HTML, un file CSS ad esso collegato ed un file
contenente il codice Javascript. Dopo aver collegato il file Javascript al file
HTML indicare nel body la funzione che rappresenterà il <em>main</em> dello script</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>body</span> <span class=na>onload</span><span class=o>=</span><span class=s>&#34;main()&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- Qui l&#39;HTML statico --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>Infine realizzare la funzione <code>main</code> nel file di script</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// codice
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span></code></pre></div></p></div><div class="alert alert-success" markdown=1><h5 class=no_toc><i class="bi bi-eye"></i> Osserva</strong></h5><p>L&rsquo;utilizzo della proprietà <code>onload</code> di <code>&lt;body></code> così come suggerito nell&rsquo;esercizio
precedente permette di eseguire del codice Javascript <strong>avendo garanzia che l&rsquo;intero
DOM sia stato costruito</strong>. In questo modo è possibile accedere agli elementi del DOM
senza incorrere nella possibilità che questi non sia ancora del tutto inizializzati.</p></div><h2 id=interfaccia-javascript-per-il-dom>Interfaccia Javascript per il DOM</h2><p>Il <em>DOM (Document Object Model)</em> rappresenta il documento HTML nella memoria del
browser e viene usato da questo per il <em>rendering</em> della pagina e per applicare
gli stili ai vari elementi.</p><p>Quando un documento HTML viene caricato dal browser (ad esempio accedendo ad un
sito web), esso genera il DOM a partire dal documento. Ovviamente, è possibile
per il browser aggiungere, modificare ed eliminare elementi dal DOM presente in
memoria. Queste operazioni possono essere invocate dal programmatore utilizzando
i metodi Javascript appropriati che sono accessibili tramite l&rsquo;oggetto <code>document</code>.</p><h3 id=accesso-al-dom>Accesso al DOM</h3><p>Cominciamo con il vedere in che modo è possibile recuperare un elemento presente
nel DOM. Il primo insieme di metodi che vediamo permette di accedere agli elementi
già presenti nel DOM. Per identificare un elemento, si usano i <em>selettori CSS</em>,
esattamente nello stesso modo in cui li si usano per applicare gli stili. Ad
esempio l&rsquo;elemento con id <code>content</code> sarà accessibile con il selettore <code>#content</code>,
gli elementi con classe <code>warning</code> saranno accessibili mediante il selettore
<code>.warning</code>.</p><p>Per la discussione che segue, faremo riferimento al seguente documento HTML</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=cp>&lt;!DOCTYPE html&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>html</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>link</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;style.css&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;script.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span>JSON e DOM<span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>body</span> <span class=na>onload</span><span class=o>=</span><span class=s>&#34;main()&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;header&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>h1</span><span class=p>&gt;</span>Laboratorio 2: JSON e DOM<span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>h2</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;subtitle&#39;&#34;</span><span class=p>&gt;</span>Utilizzo di un JSON per creare un DOM<span class=p>&lt;/</span><span class=nt>h2</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;content&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=c>&lt;!-- Content here --&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;footer&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>This is the footer<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>html</span><span class=p>&gt;</span>
</span></span></code></pre></div><h4 id=i-metodi-queryselector-e-queryselectorall>I metodi <code>querySelector</code> e <code>querySelectorAll</code></h4><p>Il modo più diretto per accedere ad un elemento del DOM è utilizzare uno dei due
metodi <a href=https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector target=_blank rel=noopener><code>querySelector</code></a> o <a href=https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelectorAll target=_blank rel=noopener><code>querySelectorAll</code></a>. Il primo restituisce sempre un solo
elemento, il secondo restituisce sempre un <code>Array</code> (che può contenere uno o più
elementi, ma può anche essere vuoto). Sia <code>querySelector</code> che <code>querySelectorAll</code>
richiedono un parametro che rappresenta il selettore CSS da utilizzare nella
selezione, vediamo qualche esempio.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// element (not necessarily a div) with id content
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>contentElement</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>querySelector</span><span class=p>(</span><span class=s1>&#39;#content&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>contentElement</span><span class=p>);</span> 
</span></span><span class=line><span class=cl><span class=c1>// &gt;&gt; &lt;div id=&#34;content&#34;&gt;
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// get the first h2 having the class subtitle
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>subtitleH2</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>querySelector</span><span class=p>(</span><span class=s1>&#39;h2.subtitle&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>subtitleH2</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=c1>// &gt;&gt; &lt;h2 class=&#34;subtitle&#34;&gt;
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// get all elements of type div
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>allDiv</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>querySelectorAll</span><span class=p>(</span><span class=s1>&#39;div&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>allDiv</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=c1>// &gt;&gt; NodeList(3) [ div#header, ... ]
</span></span></span></code></pre></div><h4 id=altri-metodi-di-accesso>Altri metodi di accesso</h4><p>I metodi <code>querySelector</code> e <code>querySelectorAll</code> sono stati introdotti relativamente
di recente, per questo spesso si trovano (e si usano) metodi diversi.</p><ul><li><a href=https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementById target=_blank rel=noopener><code>getElementById(id)</code></a>: restituisce l&rsquo;elemento con <code>id</code> dato</li><li><a href=https://developer.mozilla.org/en-US/docs/Web/API/Element/getElementsByTagName target=_blank rel=noopener><code>getElementByTagName(tagName)</code></a>: restituisce una collezione di elementi HTML con il tag dato</li><li><a href=https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByClassName target=_blank rel=noopener><code>getElementByClassName(names)</code></a>: restituisce un array con tutti gli elementi che hanno le classi date</li></ul><h3 id=manipolazione-del-dom>Manipolazione del DOM</h3><p>Oltre ad &ldquo;interrogare&rdquo; il DOM via Javascript, possiamo anche modificare il DOM
inserendo e/o cancellando elementi. <strong>Ricordiamo che il DOM è una struttura ad
albero</strong> per questo motivi, i metodi utilizzati utilizzano la terminologia
tipica degli alberi (<em>child</em>, <em>sibling</em>, <em>parent</em>, &mldr;).</p><h4 id=creazione-di-elementi>Creazione di elementi</h4><p>Gli elementi all&rsquo;interno del DOM sono rappresentati come oggetti Javascript,
questi oggetti vanno creati prima di poterli inserire nel DOM stesso. Per questo
scopo, l&rsquo;interfaccia Javascript al DOM fornisce il metodo <a href=https://developer.mozilla.org/en-US/docs/Web/API/Document/createElement target=_blank rel=noopener><code>createElement</code></a>.
Il metodo <code>createElement</code> richiede che il nome del tag da creare venga indicato,
nell&rsquo;esempio sotto, un elemento di tipo <code>div</code> viene create ed assegnato alla
constante <code>newDiv</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>newDiv</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>createElement</span><span class=p>(</span><span class=s1>&#39;div&#39;</span><span class=p>);</span>
</span></span></code></pre></div><div class="alert alert-danger" markdown=1><h5 class="alert-danger no_toc"><i class="bi bi-exclamation-triangle"></i> Attenzione</strong></h5><p>La creazione di un elemento con <code>createElement</code> <strong>non inserisce l&rsquo;elemento
appena creato nel DOM</strong>.</p></div><h4 id=aggiungere-elementi-al-dom>Aggiungere elementi al DOM</h4><p>Una volta creato un elemento, il suo inserimento all&rsquo;interno del DOM richiede
che si identifichi di preciso in che punto dell&rsquo;albero inserire l&rsquo;elemento.
Ricordiamo che in un albero ogni elemento (nodo) è figlio di un altro nodo, a
meno che non si tratti della radice. In un documento HTML la radice del DOM
è l&rsquo;elemento relativo al tag <code>&lt;html></code> e di norma viene gestito dal browser.
Di conseguenza, per inserire un nuovo elemento dobbiamo identificare il
genitore (<em>parent</em>) di cui il nuovo elemento sarà un figlio (<em>child</em>). Per lo
scopo si possono usare i metodi di <a href=#accesso-al-dom>accesso al DOM</a>.</p><p>Una volta ottenuto l&rsquo;elemento genitore, possiamo usare il metodo <code>append</code>
per aggiungere il nuovo elemento come figlio. Il codice di esempio sotto
inserisce un nuovo <code>&lt;div></code> come figlio dell&rsquo;elemento di id <code>content</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nb>document</span><span class=p>.</span><span class=nx>querySelector</span><span class=p>(</span><span class=s1>&#39;#content&#39;</span><span class=p>).</span><span class=nx>append</span><span class=p>(</span><span class=nx>createItemDiv</span><span class=p>());</span>
</span></span></code></pre></div><p>Il metodo <code>append</code> può essere usato anche per aggiungere del testo
semplice (senza HTML). Ad esempio il codice seguente crea un tag
<code>&lt;h1></code> contenente il testo <code>Titolo in h1</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>titleElement</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>createElement</span><span class=p>(</span><span class=s1>&#39;h1&#39;</span><span class=p>).</span><span class=nx>append</span><span class=p>(</span><span class=s1>&#39;Titolo in h1&#39;</span><span class=p>);</span>
</span></span></code></pre></div><div class="alert alert-primary" markdown=1><h5 class=no_toc><i class="bi bi-pencil-square"></i> Esercizio</strong></h5><p><p>Utilizzando l&rsquo;array di elementi contenuto nel JSON scaricato, creare per ognuno
di questi elementi un <code>&lt;div></code> contenente un elemento <code>&lt;h4></code> con il contenuto
dell&rsquo;elemento <code>name</code> nel JSON. Il risultato deve essere equivalente al
seguente HTML</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;content&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>h4</span><span class=p>&gt;</span>Smartphone Samsung Galaxy S21<span class=p>&lt;/</span><span class=nt>h4</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>h4</span><span class=p>&gt;</span>Laptop Dell XPS 13<span class=p>&lt;/</span><span class=nt>h4</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span></code></pre></div></p></div><h3 id=gestione-dello-stile-via-javascript>Gestione dello stile via Javascript</h3><p>Per aggiungere uno stile utilizzando Javascript si può utilizzare la proprietà
<code>classList</code> che offre i metodi <code>add</code> e <code>remove</code> per aggiungere o rimuovere
classi. Ad esempio, il codice sotto aggiunge la classe <code>with-border</code> ad un
<code>div</code> appena creato.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>newDiv</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>createElement</span><span class=p>(</span><span class=s1>&#39;div&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>newDiv</span><span class=p>.</span><span class=nx>classList</span><span class=p>.</span><span class=nx>add</span><span class=p>(</span><span class=s1>&#39;with-border&#39;</span><span class=p>);</span>
</span></span></code></pre></div><h2 id=interazione>Interazione</h2><p>All&rsquo;interno di una pagina Web spesso è possibile interagire con gli elementi
per modificare il contenuto visualizzato o per altri scopi. Ad esempio in un
sito di commercio elettronico, è auspicabile la possibilità di <em>filtrare</em> i
contenuti o ri-ordinare secondo qualche criterio di interesse. Un altro esempio
in ambito <em>e-commerce</em> è la gestione del <em>carrello</em>, un sito deve permettere
l&rsquo;aggiunta e la rimozione di oggetti (<em>item</em>) dal carrello in modo semplice
ed intuitivo.</p><h3 id=gestione-eventi>Gestione eventi</h3><p>Dal punto di vista dello sviluppatore, ogni interazione tra utente e documento
genera un <em>evento</em>. Un evento viene gestito e segnalato dal browser, è possibile
&ldquo;agganciare&rdquo; il nostro codice in modo che venga <em>notificato</em> quando un evento
si verifica. Una funzione che deve essere eseguita quando una evento accade viene
definita <strong>event listener</strong>.</p><p>In Javascript è possibile aggiungere uno o più event listener ad ogni elemento
del DOM utilizzando il metodo <code>addEventListener</code>, l&rsquo;esempio che segue mostra come
aggiungere un event listener all&rsquo;evento <code>click</code> dell&rsquo;elemento di id <code>clickme</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>clickMe</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>querySelector</span><span class=p>(</span><span class=s1>&#39;clickme&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>clickMe</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;click&#39;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;clicked!!&#39;</span><span class=p>));</span>
</span></span></code></pre></div><p>Il metodo <code>addEventListener</code> prende due parametri:</p><ul><li><strong>type</strong>: indica il tipo di evento che si vuole gestire, come <code>click</code> per un click del mouse;</li><li><strong>listener</strong>: indica la funzione che deve essere eseguita quando si verifica l&rsquo;evento specificato,
nell&rsquo;esempio sopra questa funzione è una <em>arrow function</em>.</li></ul><h3 id=implementazione-dellevent-listener>Implementazione dell&rsquo;<em>event listener</em></h3><p>L&rsquo;<em>event listener</em> che viene invocato ogni volta che si verifica un evento deve
contenere la logica necessaria a realizzare il comportamento desiderato. Ad
esempio, in un sito di <em>e-commerce</em> il click su <code>Add to cart</code> aggiunge l&rsquo;elemento
corrispondente al carrello.</p><h2 id=riassunto-metodi-manipolazione-dom>Riassunto metodi manipolazione DOM</h2><ul><li><a href=https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelector target=_blank rel=noopener><code>querySelector</code></a></li><li><a href=https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelectorAll target=_blank rel=noopener><code>querySelectorAll</code></a></li><li><a href=https://developer.mozilla.org/en-US/docs/Web/API/Document/createElement target=_blank rel=noopener><code>createElement</code></a></li><li><a href=https://developer.mozilla.org/en-US/docs/Web/API/Element/append target=_blank rel=noopener><code>append</code></a></li><li><a href=https://developer.mozilla.org/en-US/docs/Web/API/Element/classList target=_blank rel=noopener><code>classList</code></a></li></ul><h2 id=riferimenti>Riferimenti</h2><ul><li><a href=https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model/Introduction target=_blank rel=noopener>MDN Guida DOM (EN)</a></li><li><a href=https://www.w3schools.com/js/js_htmldom.asp target=_blank rel=noopener>W3School DOM Tutorial()</a></li><li><a href=https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events target=_blank rel=noopener>MDN Guida eventi (EN)</a></li></ul></div></article><nav class="mx-5 my-3"><div class=card><h5 class=card-header>Indice di Javascript</h5><ul class="list-group list-group-flush"><li class=list-group-item><a href=https://profschimd.github.io/materie/inf/4/07-javascript/01-basi/>Basi di Javascript</a></li><li class=list-group-item><a href=https://profschimd.github.io/materie/inf/4/07-javascript/02-array-oggetti/>Array e Oggetti in Javascript</a></li><li class=list-group-item><a href=https://profschimd.github.io/materie/inf/4/07-javascript/03-canvas/>Canvas</a></li><li class=list-group-item><a href=https://profschimd.github.io/materie/inf/4/07-javascript/l01-tic-tac-toe/>Laboratorio 1: Tic Tac Toe (Tris) con Canvas HTML5</a></li><li class="list-group-item list-group-item-primary"><strong><a href=https://profschimd.github.io/materie/inf/4/07-javascript/l02-dom-and-json/>> Laboratorio 2: Utilizzo di un JSON per creare un DOM</a></strong></li></ul><div class=card-footer><a class="btn btn-primary" href=https://profschimd.github.io/materie/inf/4/07-javascript/>Index</a></div></div></nav></main></div><div class="py-3 border-top bg-light mt-auto"><div class=container><div class=row><div class=col-sm><ul class=list-unstyled><li>Michele Schimd &copy; 2024</li><li><a class=pr-1 href=mailto:michele.schimd@itiszuccante.edu.it><svg xmlns="http://www.w3.org/2000/svg" width="1.5em" fill="currentcolor" class="bi bi-at" viewBox="0 0 16 16"><path d="M.05 3.555A2 2 0 012 2h12a2 2 0 011.95 1.555L8 8.414.05 3.555zM0 4.697v7.104l5.803-3.558L0 4.697zM6.761 8.83.191 12.857A2 2 0 002 14h12a2 2 0 001.808-1.144l-6.57-4.027L8 9.586l-1.239-.757zm3.436-.586L16 11.801V4.697l-5.803 3.546z"/></svg>
</a><a class=pr-1 rel=me href=https://github.com/ProfSchimd target=_blank title=ProfSchimd alt=GitHub><svg xmlns="http://www.w3.org/2000/svg" width="1.5em" fill="currentcolor" class="bi bi-github" viewBox="0 0 16 16"><path d="M8 0C3.58.0.0 3.58.0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38.0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95.0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12.0.0.67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15.0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48.0 1.07-.01 1.93-.01 2.2.0.21.15.46.55.38A8.012 8.012.0 0016 8c0-4.42-3.58-8-8-8z"/></svg>
</a><a class=pr-1 rel=me href=https://www.linkedin.com/in/michele-schimd-44a85160 target=_blank title=michele-schimd-44a85160 alt=Linkedin><svg xmlns="http://www.w3.org/2000/svg" width="1.5em" fill="currentcolor" class="bi bi-linkedin" viewBox="0 0 16 16"><path d="M0 1.146C0 .513.526.0 1.175.0h13.65C15.474.0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487.0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837.0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822.0-1.359.54-1.359 1.248.0.694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869.0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274.0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54.0 01.016-.025V6.169h-2.4c.03.678.0 7.225.0 7.225h2.4z"/></svg>
</a><a class=pr-1 rel=me href=https://stackoverflow.com/users/18081937 target=_blank title=18081937><svg xmlns="http://www.w3.org/2000/svg" width="1.5em" fill="currentcolor" class="bi bi-stack-overflow" viewBox="0 0 16 16"><path d="M12.412 14.572V10.29h1.428V16H1v-5.71h1.428v4.282h9.984z"/><path d="M3.857 13.145h7.137v-1.428H3.857v1.428zM10.254.0 9.108.852l4.26 5.727 1.146-.852L10.254.0zm-3.54 3.377 5.484 4.567.913-1.097L7.627 2.28l-.914 1.097zM4.922 6.55l6.47 3.013.603-1.294-6.47-3.013-.603 1.294zm-.925 3.344 6.985 1.469.294-1.398-6.985-1.468-.294 1.397z"/></svg></a></li><li><span style=font-size:small><em>Ultimo aggiornamento: 17/02/2024</em></span></li></ul></div><div class="col-lg text-right"><ul class=list-unstyled><li>Materiale di studio e di esercizio per gli alunni dello Zuccante.</li></ul><div><p><a rel=license href=http://creativecommons.org/licenses/by-nc/4.0/><img style=float:right alt="Creative Commons License" src=https://i.creativecommons.org/l/by-nc/4.0/88x31.png></a></div></p></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js integrity=sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js integrity=sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF crossorigin=anonymous></script></body></html>