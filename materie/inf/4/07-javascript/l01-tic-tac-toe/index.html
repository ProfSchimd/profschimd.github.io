<!doctype html><html><head><meta charset=utf-8><title>Laboratorio 1: Tic Tac Toe (Tris) con Canvas HTML5 &ndash; Michele Schimd</title><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://cdn.jsdelivr.net/npm/bootswatch@4.5.2/dist/spacelab/bootstrap.min.css rel=stylesheet><link href=https://profschimd.github.io/css/syntax.css rel=stylesheet><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css><script src=https://code.jquery.com/jquery-3.4.1.slim.min.js integrity=sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n crossorigin=anonymous></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></head><body class="d-flex flex-column min-vh-100"><header><nav class="p-1 navbar navbar-expand-lg navbar-dark bg-primary"><div class=container><a class=navbar-brand rel=author href=https://profschimd.github.io/>Michele Schimd</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav ml-auto"><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# role=button data-bs-toggle=dropdown aria-expanded=false>Materie</a><ul class=dropdown-menu aria-labelledby=navbarDropdown><li><a href=https://profschimd.github.io/materie/inf/ class=dropdown-item>Informatica</a></li><li><a href=https://profschimd.github.io/materie/sr/ class=dropdown-item>SR</a></li><li><a href=https://profschimd.github.io/materie/tpsit/ class=dropdown-item>TPSIT</a></li><li><a href=https://profschimd.github.io/materie/gpoi/ class=dropdown-item>GPOI</a></li><li><a href=https://profschimd.github.io/materie/ec/ class=dropdown-item>EC</a></li><li><a href=https://profschimd.github.io/materie/python/ class=dropdown-item>Python</a></li></ul></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# role=button data-bs-toggle=dropdown aria-expanded=false>Classi</a><ul class=dropdown-menu aria-labelledby=navbarDropdown><li><a href=https://profschimd.github.io/classi/4ia/ class=dropdown-item>4IA</a></li><li><a href=https://profschimd.github.io/classi/4ic/ class=dropdown-item>4IC</a></li><li><a href=https://profschimd.github.io/classi/5ic/ class=dropdown-item>5IC</a></li><li><a href=https://profschimd.github.io/classi/5id/ class=dropdown-item>5ID</a></li><li><a href=https://profschimd.github.io/classi/anni-passati/ class=dropdown-item>Anni precedenti</a></li></ul></li><li class=nav-item><a class=nav-link href=https://profschimd.github.io/about/ role=button><i class="bi bi-info-circle"></i></a></li></ul></div></div></nav></header><div class="p-4 bg-primary" style="background-size:cover;background-position:50%;background-image:linear-gradient(to bottom,rgba(0,0,0,.3) 0%,rgba(0,0,0,.6) 100%),url(https://profschimd.github.io/img/zuccante_it.jpeg)"><div class=container><h1 class="display-4 text-white">Laboratorio 1: Tic Tac Toe (Tris) con Canvas HTML5</h1></div></div><div class=bg-light><nav aria-label="breadcrumb mt-0"><div class=container><ol class=breadcrumb><li class=breadcrumb-item><a href=https://profschimd.github.io/>Home</a></li><li class=breadcrumb-item><a href=https://profschimd.github.io/materie/>Materie</a></li><li class=breadcrumb-item><a href=https://profschimd.github.io/materie/inf/>Informatica</a></li><li class=breadcrumb-item><a href=https://profschimd.github.io/materie/inf/4/>Quarto anno</a></li><li class=breadcrumb-item><a href=https://profschimd.github.io/materie/inf/4/07-javascript/>Javascript</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://profschimd.github.io/materie/inf/4/07-javascript/l01-tic-tac-toe/>Laboratorio 1: Tic Tac Toe (Tris) con Canvas HTML5</a></li></ol></nav></div><div class="container py-5"><main><div class=row><div class=col-10><aside><nav id=TableOfContents><ul><li><a href=#descrizione-del-laboratorio>Descrizione del laboratorio</a></li><li><a href=#1---il-modello-model>1 - Il modello (<em>model</em>)</a><ul><li><a href=#11---rappresentazione-della-scacchiera>1.1 - Rappresentazione della scacchiera</a></li></ul></li><li><a href=#2---linterfaccia-view>2 - L&rsquo;interfaccia (<em>view</em>)</a><ul><li><a href=#21---la-scacchiera>2.1 - La scacchiera</a></li><li><a href=#22---visualizzare-le-mosse>2.2 - Visualizzare le mosse</a></li></ul></li><li><a href=#3---linterazione-control>3 - L&rsquo;interazione (<em>control</em>)</a><ul><li><a href=#31---gestione-del-mouse>3.1 - Gestione del mouse</a></li><li><a href=#32---il-turno-di-gioco>3.2 - Il turno di gioco</a></li><li><a href=#33---controllo-delle-mosse-valide>3.3 - Controllo delle mosse valide</a></li><li><a href=#34---controllo-della-condizione-di-fine-partita>3.4 - Controllo della condizione di fine partita</a></li><li><a href=#35---reset-del-gioco>3.5 - Reset del gioco</a></li></ul></li><li><a href=#4---tic-tac-toe-pro>4 - Tic Tac Toe PRO</a><ul><li><a href=#41---più-di-3>4.1 - Più di 3&mldr;</a></li><li><a href=#42---simbolo-colore-e-nome>4.2 - Simbolo, colore e nome</a></li><li><a href=#43---classifica-e-torneo>4.3 - Classifica e torneo</a></li><li><a href=#44---meglio-si-soli-che-mal-accompagnati>4.4 - Meglio si soli che mal accompagnati&mldr;</a></li></ul></li></ul></nav></aside></div><div class=col-2></div></div><article><div class=container style=text-align:justify><h2 id=descrizione-del-laboratorio>Descrizione del laboratorio</h2><p>In questo laboratorio verrà sviluppato il classico gioco <em>Tic Tac Toe</em> (in Italia
noto con il nome <em>Tris</em>). Il gioco verrà sviluppato nella sua interezza, partendo
dalla <em>rappresentazione in memoria</em> della scacchiera di gioco, fino alla realizzazione
dei controlli necessari a renderlo pienamente funzionante. La parte più significativa del
laboratorio è l&rsquo;utilizzo dell&rsquo;elemento <code>&lt;canvas></code> di HTML5 spiegato meglio nella
<a href=https://profschimd.github.io/materie/inf/4/07-javascript/03-canvas/>lezione dedicata</a>.</p><p>Il laboratorio è diviso in tre parti:</p><ol><li>modello (<em>Model</em>),</li><li>interfaccia (<em>View</em>),</li><li>controllo (<em>Control</em>).</li></ol><p>Ogni parte aggiunge funzionalità al gioco di modo che, alla fine delle tre
parti, si avrà un gioco pienamente funzionante.</p><div class="alert alert-danger" markdown=1><h5 class="alert-danger no_toc"><i class="bi bi-exclamation-triangle"></i> Attenzione</strong></h5><p><p>Questo laboratorio ha lo scopo di guidare lo studente nella scrittura, da zero, del
gioco Tic Tac Toe. Per questo motivo non è presente codice (se non in minima parte
e per indicare specifiche <em>feature</em> del linguaggio) e non vi è alcun repository
associato.</p><p>Per ottenere il massimo da questo laboratorio, <strong>ogni studente dovrebbe sviluppare,
in piena autonomia, il gioco da zero</strong>. Lo studente può chiedere aiuto al docente o
al tutor (se presente) i quali possono aiutare lo studente a pensare la soluzione.</p></p></div><h2 id=1---il-modello-model>1 - Il modello (<em>model</em>)</h2><p>In questa parte vedremo come rappresentare in memoria lo <em>stato</em> del gioco, cioè
la situazione sulla scacchiera di gioco. È importante capire che lo stato
è diverso (anche se fortemente collegato) da quello che viene visualizzato
dall&rsquo;interfaccia (questo aspetto è più evidente in giochi più complessi dove non
tutto lo stato del gioco è mostrato sullo schermo).</p><h3 id=11---rappresentazione-della-scacchiera>1.1 - Rappresentazione della scacchiera</h3><p>Il primo passo è individuare quali parti del gioco rappresentare e come rappresentarle.
Nel caso di Tic Tac Toe, lo <em>stato</em> è formato da:</p><ul><li>ogni singola cella della scacchiera \(3 \times 3\), cale a dire cosa c&rsquo;è
su ognuna delle 9 celle (<code>Vuoto</code>, <code>X</code> o <code>O</code>);</li><li>un&rsquo;indicazione del prossimo giocatore che ha il turno o, in alternativa,
un&rsquo;indicazione di &ldquo;fine gioco&rdquo; quando non sono possibili ulteriori mosse.</li></ul><div class="alert alert-primary" markdown=1><h5 class=no_toc><i class="bi bi-pencil-square"></i> Esercizio: Stato del gioco</strong></h5><p><p>Creare un oggetto <code>State</code> che contenga due variabili: una per lo stato della
scacchiera ed uno per indicare il turno (prossimo giocatore).</p><p><strong>Suggerimento</strong> per indicare lo stato della scacchiera si può usare una
struttura bidimensionale indicando per ogni posizione un intero che rappresenta
lo stato (ad esempio: <code>0->Vuoto</code>, <code>1->X</code>, <code>2->O</code>).</p></p></div><h2 id=2---linterfaccia-view>2 - L&rsquo;interfaccia (<em>view</em>)</h2><p>L&rsquo;interfaccia rappresenta ciò che l&rsquo;utente vede e ciò con cui l&rsquo;utente interagisce
(scacchiera, bottoni, informazioni, &mldr;), per questo motivo il ruolo dell&rsquo;interfaccia
in gioco è fondamentale.</p><p>In questa seconda parte del laboratorio costruiremo l&rsquo;interfaccia del gioco Tic Tac
Toe a partire dalla <a href=#11---rappresentazione-della-scacchiera><em>rappresentazione della scacchiera</em></a> che abbiamo sviluppato nella parte precedente. Lo
sviluppo dell&rsquo;interfaccia avverrà in due parti</p><ol><li>Disegno della <a href=#21---la-scacchiera>scacchiera</a> vuota e dei controlli e</li><li>Disegno delle <a href=#22---visualizzare-le-mosse>mosse</a> cioè dei simboli sulla scacchiera.</li></ol><h3 id=21---la-scacchiera>2.1 - La scacchiera</h3><div class=row><div class=col-8><p>Nel disegnare l&rsquo;interfaccia iniziamo dalla <em>scacchiera</em> di gioco che nel caso di Tic
Tac Toe è una griglia \(3 \times 3\) inizialmente vuota.</p><p>La figura a destra mostra uno screenshot di tale griglia (senza particolare
attenzione alla bellezza della griglia stessa). Nell&rsquo;esempio, la griglia occupa
l&rsquo;intera area del canvas, ma spesso è necessario (o meglio esteticamente) lasciare
dello spazio attorno all&rsquo;area di gioco. Tale spazio può essere utilizzato per
inserire informazioni sul gioco (punteggio, turno, tempo trascorso), controlli
(salva, abbandona, reset, &mldr;) e molto altro.</p><p>In questo laboratorio i controlli e le altre informazioni (ad esempio il giocatore che deve
fare la prossima mossa) vengono indicati utilizzando elementi HTML esterni al canvas (ai
quali si accede usando i metodi di accesso al <a href>DOM</a> della pagina).</p></div><div class=col-4><img src=../img/img-ttt-grid.png width=75%></div></div><div class="alert alert-primary" markdown=1><h5 class=no_toc><i class="bi bi-pencil-square"></i> Esercizio: Disegno della scacchiera</strong></h5><p><p>Utilizzando i metodi per disegnare rettangoli su canvas, disegnare una griglia
\(3 \times 3 \) all&rsquo;interno di un canvas. Inizialmente la griglia deve occupare l&rsquo;intero
canvas, per ottenere questo effetto si può utilizzare uno dei due modi seguenti
per recuperare <code>height</code> e <code>width</code> del canvas.</p><p><em>Modo 1:</em> proprietà dell&rsquo;elemento <code>&lt;canvas></code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>canvas</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>querySelector</span><span class=p>(</span><span class=s1>&#39;#canvas&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>width</span> <span class=o>=</span> <span class=nx>canvas</span><span class=p>.</span><span class=nx>width</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>height</span> <span class=o>=</span> <span class=nx>canvas</span><span class=p>.</span><span class=nx>height</span><span class=p>;</span></span></span></code></pre></div><p><em>Modo 2:</em> usare l&rsquo;oggetto <em>context</em> e le sue proprietà <code>offsetX</code> e <code>offsetY</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>canvas</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>querySelector</span><span class=p>(</span><span class=s1>&#39;#canvas&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>ctx</span> <span class=o>=</span> <span class=nx>canvas</span><span class=p>.</span><span class=nx>getContext</span><span class=p>(</span><span class=s1>&#39;2d&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>width</span> <span class=o>=</span> <span class=nx>ctx</span><span class=p>.</span><span class=nx>offsetY</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>height</span> <span class=o>=</span> <span class=nx>ctx</span><span class=p>.</span><span class=nx>offsetX</span><span class=p>;</span></span></span></code></pre></div></p></div><div class="alert alert-primary" markdown=1><h5 class=no_toc><i class="bi bi-pencil-square"></i> Esercizio: Scacchiera con sfondo</strong></h5><p><p>Una versione più bella della scacchiera si può ottenere utilizzando uno sfondo
(ad esempio un&rsquo;immagine) del canvas (in alternativa si può usare <em>un gradiente</em>)
e lasciando un margine tra il bordo del canvas e la scacchiera.</p><ol><li>Disegnare uno sfondo (immagine o gradiente) sull&rsquo;intero canvas</li><li>Disegnare la scacchiera lasciando un margine tra questa e i bordi del canvas, il
margine può essere dato in termini assoluti (ad esempio 10 px) oppure in termini
relativi (ad esempio il 5% della larghezza e dell&rsquo;altezza).</li></ol></p></div><h3 id=22---visualizzare-le-mosse>2.2 - Visualizzare le mosse</h3><div class=row><div class=col-8><p>Il passo successivo è riportare sull&rsquo;interfaccia (sulla scacchiera disegnata) la
situazione del gioco che è rappresentata dalla variabile usata nello stato. In
altra parole dobbiamo riempire le caselle (o lasciarle vuote) sulla base del valore
che vediamo nella variabile di stato.</p><p>Supponiamo di avere la variabile <code>board</code> che è un array bidimensionale \(3 \times 3\),
se abbiamo usato il valore <code>1</code> per il giocatore <code>X</code>, il valore <code>2</code> per il giocatore <code>O</code>
e il valore <code>0</code> per la casella vuota, allora l&rsquo;immagine a destra sarà la rappresentazione
del seguente stato</p><pre tabindex=0><code>2 0 1
1 2 0
0 0 1
</code></pre><p>Anche se non è obbligatorio, conviene avere una funzione che sia in grado di
disegnare una <code>X</code> nella posizione centrale della casella ed una funzione
analoga per il disegno di una <code>O</code>.</p></div><div class=col-4><img src=../img/img-ttt-game.png width=75%></div></div><div class="alert alert-primary" markdown=1><h5 class=no_toc><i class="bi bi-pencil-square"></i> Esercizio: Disegno dei simboli da gioco</strong></h5><p><p>Scrivere le due funzioni</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>drawCrossCenteredAt</span><span class=p>(...)</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>drawCircleCenteredAt</span><span class=p>(...)</span> <span class=p>{</span> <span class=p>...</span> <span class=p>}</span>
</span></span></code></pre></div><p>Che prendono un punto <em>centro</em> del <code>canvas</code> ed un <em>raggio</em> e disegnano il
simbolo centrato nel punto dato e con il raggio dato.</p></p></div><p>Disegnare la scacchiera (e gli altri elementi del gioco) è un operazione molto
frequenta che deve essere eseguita ogni volta che lo stato del gioco cambia.
Di conseguenza conviene una funzione che si occupa di fare quest e che può essere
invocata ogni qualvolta vi sia necessità di ridisegnare la scacchiera.</p><div class="alert alert-primary" markdown=1><h5 class=no_toc><i class="bi bi-pencil-square"></i> Esercizio: Funzione draw</strong></h5><p><p>Creare una funzione <code>draw</code> che si occupa di:</p><ul><li>disegnare la scacchiera sulla base dei valori presenti nello stato, per fare
questo conviene usare le funzioni <code>drawCross...</code> e <code>drawCircle...</code> definite
nell&rsquo;esercizio precedente;</li><li>aggiornare eventuali messaggi (prossimo turno, vincitore, fine, &mldr;).</li></ul><p>Per controllare che la funzione esegua correttamente il suo compito, si può
cambiare &ldquo;manualmente&rdquo; lo stato del gioco e vedere se <code>draw</code> si comporta in modo
coerente con i nuovi valori.</p></p></div><h2 id=3---linterazione-control>3 - L&rsquo;interazione (<em>control</em>)</h2><p>In questo terzo passo ci occupiamo di realizzare la &ldquo;logica&rdquo; del gioco definendo
la parte del programma che abbiamo chiamato <em>control</em>. Dovremo occupaci dei
seguenti aspetti del gioco</p><ul><li>gestione del turno tra i giocatori;</li><li>validazione delle mosse, impedendo mosse non valide;</li><li>controllo della condizione di fine partita per vittoria di un giocatore o pareggio e</li><li>reset del gioco per iniziare una nuova partita.</li></ul><p>La prima cosa da fare, tuttavia, è gestire il mouse e gli eventi associati in
modo che il giocatore possa interagire con il canvas cliccando nella zona in cui
vuole inserire il proprio simbolo.</p><h3 id=31---gestione-del-mouse>3.1 - Gestione del mouse</h3><p>Come per altri controllo HTML, il canvas permette una gestione degli eventi che
esso genera. L&rsquo;evento che ci interessa gestire è il <em>click</em> del mouse all&rsquo;interno
del canvas, allo scopo si può registrare un <em>event listener</em> all&rsquo;elemento <code>&lt;canvas></code>
indicando quale funzione si vuole agganciare.</p><div class="alert alert-primary" markdown=1><h5 class=no_toc><i class="bi bi-pencil-square"></i> Esercizio: Gestione del click su canvas</strong></h5><p><p>Definire una funzione Javascript che accetta un unico parametro, supponiamo di
chiamare questa funzione <code>canvasOnclick</code> e che il il suo parametro abbia nome
<code>event</code>. Per &ldquo;agganciare&rdquo; la funzione definita all&rsquo;evento generato dal browser,
utilizzare il seguente codice, subito dopo aver ottenuto l&rsquo;elemento <code>&lt;canvas></code>
mediante <code>querySelector</code> (e <code>getElementById</code>).</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>canvas</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;click&#39;</span><span class=p>,</span> <span class=nx>canvasOnClick</span><span class=p>,</span> <span class=kc>false</span><span class=p>);</span>
</span></span></code></pre></div><p>All&rsquo;interno della funzione scrivere il codice per stampare sulla console i valori
delle proprietà <code>offsetX</code> e <code>offsetY</code> del parametro (variabile <code>event</code> secondo i
nomi definiti sopra). Fatto questo, si dovrebbe vedere apparire sulla console le
coordinate \(x\) ed \(y\) del punto all&rsquo;interno del canvas in cui il mouse è
stato cliccato.</p></p></div><p>Per il Tic Tac Toe più che la posizione all&rsquo;interno del canvas, è importante
conoscere quale delle caselle è stata cliccata. Per fare questo si può calcolare,
sulla base del punto \((x,y)\), il numero di riga e di colonna della casella
corrispondente.</p><div class="alert alert-primary" markdown=1><h5 class=no_toc><i class="bi bi-pencil-square"></i> Esercizio: Calcolo casella selezionata</strong></h5><p>Scrivere il codice Javascript che, data la dimensione della scacchiera (che potrebbe
non coincidere con la dimensione del canvas se si è aggiunto un bordo) ed un punto
di coordinate \((x,y)\) calcola il valore della riga (<code>0</code>, <code>1</code> o <code>2</code>) e della
colonna (<code>0</code>, <code>1</code> o <code>2</code>) in cui si verificato il <code>click</code>. È importante ricordarsi
di gestire anche il caso in cui il click sia avvenuto in una zona che non è parte
della scacchiera di gioco (nel caso di scacchiera con bordo).</p></div><h3 id=32---il-turno-di-gioco>3.2 - Il turno di gioco</h3><p>Passando ora alla gestione del gioco, iniziamo con un meccanismo che tenga conto
di quale giocatore è il prossimo a fare la propria mossa. Anche se i giocatori
sono di norma identificati dai simboli <code>X</code> e <code>O</code>, spesso conviene usare un diverso
modo identificarli, ad esempio possiamo usare <code>1</code> per il giocatore <code>X</code> e <code>2</code> per
il giocatore <code>O</code>.</p><p>Con questa convenzione, possiamo usare un intero per tenere traccia del prossimo
giocatore in turno, la cosa importante è aggiornare ad ogni mossa <strong>valida</strong> il
turno in modo che sia sempre corretto.</p><div class="alert alert-primary" markdown=1><h5 class=no_toc><i class="bi bi-pencil-square"></i> Esercizio: Turno di gioco</strong></h5><p>Realizzare all&rsquo;interno della funzione di <em>callback</em> del click (sopra indicata con
<code>canvasOnclick</code>), il meccanismo di alternanza dei turni. Si tenga presente che
sarà necessario gestire le mosse non valide (ad esempio click in una cella già
occupata) che non fanno cambiare il prossimo giocatore.</p></div><p>Per rendere il gioco più usabile, è bene che vi sia un indicazione di quale
giocatore deve fara la prossima mossa. Questa indicazione deve essere visibile
e comprensibile (ad esempio non basta mettere un valore <code>1</code> o <code>2</code> in un punto
&ldquo;a caso&rdquo; dello schermo).</p><div class="alert alert-primary" markdown=1><h5 class=no_toc><i class="bi bi-pencil-square"></i> Esercizio: Indicazione turno</strong></h5><p><p>Realizzare un meccanismo che mostri quale giocatore deve eseguire la prossima
mossa. Un possibile modo è attraverso un elemento HTML, ad esempio un <code>&lt;p></code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>p</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;turno&#34;</span><span class=p>&gt;</span>Il prossimo giocatore è X<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>per modificare il contenuto di un elemento in Javascript, dopo aver ottenuto un
oggetto per quel elemento (usando <code>querySelector</code> o <code>getElementById</code>), si può
impostare la proprietà <code>textContent</code> ad esempio</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>elementToUpdate</span><span class=p>.</span><span class=nx>textContent</span> <span class=o>=</span> <span class=s1>&#39;Prossimo giocatore: ...&#39;</span><span class=p>;</span>
</span></span></code></pre></div></p></div><h3 id=33---controllo-delle-mosse-valide>3.3 - Controllo delle mosse valide</h3><p>Non tutti i click rappresentano delle mosse valide, nel caso di Tic Tac Toe, un
click in corrispondenza di una casella già occupata rappresenta una mossa non
valida. Quando un giocatore esegue una mossa non valida, il gioco deve ignorarla
mantenendo un&rsquo;indicazione di quale giocatore deve eseguire la mossa. Si può anche
prevedere un meccanismo che segnali quando una mossa non è valida, in un gioco
semplice come Tic Tac Toe, questo meccanismo non è necessario.</p><h3 id=34---controllo-della-condizione-di-fine-partita>3.4 - Controllo della condizione di fine partita</h3><p>In Tic Tac Toe la partita termina in uno dei seguenti casi:</p><ul><li>un giocatore esegue <em>tris</em>, mettendo tre simboli di fila nella stessa colonna,
nella stessa riga o nella stessa diagonale;</li><li>le caselle sono tutte riempite, in questo caso si verifica il pareggio se
nessun giocatore ha messo tre simboli in fila.</li></ul><div class="alert alert-primary" markdown=1><h5 class=no_toc><i class="bi bi-pencil-square"></i> Esercizio: Controllo condizione di fine</strong></h5><p><p>Dopo aver eseguito una mossa, lo stato del gioco cambia, questo cambiamento si
vede attraverso la variabile che memorizza lo stato della scacchiera.</p><p>Analizzare il contenuto della variabile e decidere quale delle seguenti condizioni
è vera:</p><ul><li>gioco vinto da uno dei due giocatori,</li><li>gioco terminato in pareggio,</li><li>gioco non vinto e non terminato (si continua a giocare).</li></ul><p>Una volta verificato quale stato visualizzare un messaggio che indica una
delle condizioni. Si può essere lo stesso meccanismo usato per indicare il turno
(ad esempio indicando il vincitore o che la partita si è conclusa con un
pareggio).</p></p></div><h3 id=35---reset-del-gioco>3.5 - Reset del gioco</h3><p>Una volta concluso il gioco, per iniziare una nuova partita è necessario &ldquo;pulire&rdquo;
la scacchiera e re-impostare tutti i valori.</p><p>Per fare questo si può usare un elemento HTML di tipo <em>bottone</em> dichiarato nel
seguente modo</p><div class="alert alert-primary" markdown=1><h5 class=no_toc><i class="bi bi-pencil-square"></i> Esercizio: Reset del gioco</strong></h5><p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>input</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;reset&#34;</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;button&#34;</span> <span class=na>value</span><span class=o>=</span><span class=s>&#34;Reset&#34;</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>Per eseguire del codice quando il bottone viene cliccato, come nel caso del
canvas, è necessario creare una funzione di <em>callback</em> (o <em>handler</em>), diciamo
la funzione <code>reset</code> che avrà un parametro (l&rsquo;evento) e che si occuperà di
rimettere i valori iniziali in tutte le variabili, avendo anche cura di ridisegnare
la scacchiera (ora vuota).</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>resetButton</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;click&#39;</span><span class=p>,</span> <span class=nx>reset</span><span class=p>,</span> <span class=kc>false</span><span class=p>);</span> <span class=c1>// ricorda qualcosa?
</span></span></span></code></pre></div></p></div><h2 id=4---tic-tac-toe-pro>4 - Tic Tac Toe PRO</h2><p>Il gioco del Tic Tac Toe è molto semplice e magari noioso per qualcuno, perché
non renderlo più interessante con una versione <em>Pro</em> con nuove feature, ecco
alcune idee.</p><h3 id=41---più-di-3>4.1 - Più di 3&mldr;</h3><p>Il classico Tic Tac Toe si gioca su una scacchiera \(3 \times 3\), ma nulla vieta
di far diventare la scacchiera \(4 \times 4, 5 \times 5, \ldots \), insomma
la versione Pro potrebbe contenere uno slider (elemento <a href=https://www.w3schools.com/tags/att_input_type_range.asp target=_blank rel=noopener>HTML Range</a>)
per selezionare la dimensione della scacchiera (ad esempio da \(3 \times 3\) a
\( 8 \times 8 \)) in questo modo il gioco sarà molto più accattivante e meno
noioso!</p><h3 id=42---simbolo-colore-e-nome>4.2 - Simbolo, colore e nome</h3><p>Anche l&rsquo;occhio vuole la sua parte, perché non dare ai giocatori di scegliersi
un simbolo di gioco (non solo X e O) ed un colore? Fatto questo perché non dare
anche l&rsquo;opportunità di avere un nome anziché <code>Player 1</code> e <code>Player 2</code>? Attenzione
però, che non ci possono essere giocatori con lo stesso simbolo e colore e nemmeno
due giocatori con lo stesso nome!</p><h3 id=43---classifica-e-torneo>4.3 - Classifica e torneo</h3><p>Non sarebbe bello organizzare un bel torneo di Tic Tac Toe PRO? Si potrebbe
aggiungere una classifica delle partite (\(+3\) per la vittoria \(+1\) per
il pareggio e \(0\) per la sconfitta). Si può anche prevedere un <em>torneo ad
eliminazione</em> (scontro diretto o alla meglio delle 5?) che preveda
gironi, ottavi, quarti, &mldr;,</p><h3 id=44---meglio-si-soli-che-mal-accompagnati>4.4 - Meglio si soli che mal accompagnati&mldr;</h3><p>A volte non c&rsquo;è nessuno che ci sfidi a Tic Tac Toe, se solo ci fosse un&rsquo;AI
che ci sfida! Si potrebbe pensare di creare un semplice AI che ci sfidi il
giocatore umano (e se facessimo giocare l&rsquo;AI contro sè stessa?). L&rsquo;AI potrebbe
anche essere istruita per essere a livelli: facile, medio, difficile,
impossibile, &mldr;</p></div></article><nav class="mx-5 my-3"><div class=card><h5 class=card-header>Indice di Javascript</h5><ul class="list-group list-group-flush"><li class=list-group-item><a href=https://profschimd.github.io/materie/inf/4/07-javascript/01-basi/>Basi di Javascript</a></li><li class=list-group-item><a href=https://profschimd.github.io/materie/inf/4/07-javascript/02-array-oggetti/>Array e Oggetti in Javascript</a></li><li class=list-group-item><a href=https://profschimd.github.io/materie/inf/4/07-javascript/03-canvas/>Canvas</a></li><li class="list-group-item list-group-item-primary"><strong><a href=https://profschimd.github.io/materie/inf/4/07-javascript/l01-tic-tac-toe/>> Laboratorio 1: Tic Tac Toe (Tris) con Canvas HTML5</a></strong></li></ul><div class=card-footer><a class="btn btn-primary" href=https://profschimd.github.io/materie/inf/4/07-javascript/>Index</a></div></div></nav></main></div><div class="py-3 border-top bg-light mt-auto"><div class=container><div class=row><div class=col-sm><ul class=list-unstyled><li>Michele Schimd &copy; 2023</li><li><a class=pr-1 href=mailto:michele.schimd@itiszuccante.edu.it><svg xmlns="http://www.w3.org/2000/svg" width="1.5em" fill="currentcolor" class="bi bi-at" viewBox="0 0 16 16"><path d="M.05 3.555A2 2 0 012 2h12a2 2 0 011.95 1.555L8 8.414.05 3.555zM0 4.697v7.104l5.803-3.558L0 4.697zM6.761 8.83.191 12.857A2 2 0 002 14h12a2 2 0 001.808-1.144l-6.57-4.027L8 9.586l-1.239-.757zm3.436-.586L16 11.801V4.697l-5.803 3.546z"/></svg></a><a class=pr-1 rel=me href=https://github.com/ProfSchimd target=_blank title=ProfSchimd alt=GitHub><svg xmlns="http://www.w3.org/2000/svg" width="1.5em" fill="currentcolor" class="bi bi-github" viewBox="0 0 16 16"><path d="M8 0C3.58.0.0 3.58.0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38.0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95.0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12.0.0.67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15.0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48.0 1.07-.01 1.93-.01 2.2.0.21.15.46.55.38A8.012 8.012.0 0016 8c0-4.42-3.58-8-8-8z"/></svg></a><a class=pr-1 rel=me href=https://www.linkedin.com/in/michele-schimd-44a85160 target=_blank title=michele-schimd-44a85160 alt=Linkedin><svg xmlns="http://www.w3.org/2000/svg" width="1.5em" fill="currentcolor" class="bi bi-linkedin" viewBox="0 0 16 16"><path d="M0 1.146C0 .513.526.0 1.175.0h13.65C15.474.0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487.0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837.0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822.0-1.359.54-1.359 1.248.0.694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869.0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274.0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54.0 01.016-.025V6.169h-2.4c.03.678.0 7.225.0 7.225h2.4z"/></svg></a><a class=pr-1 rel=me href=https://stackoverflow.com/users/18081937 target=_blank title=18081937><svg xmlns="http://www.w3.org/2000/svg" width="1.5em" fill="currentcolor" class="bi bi-stack-overflow" viewBox="0 0 16 16"><path d="M12.412 14.572V10.29h1.428V16H1v-5.71h1.428v4.282h9.984z"/><path d="M3.857 13.145h7.137v-1.428H3.857v1.428zM10.254.0 9.108.852l4.26 5.727 1.146-.852L10.254.0zm-3.54 3.377 5.484 4.567.913-1.097L7.627 2.28l-.914 1.097zM4.922 6.55l6.47 3.013.603-1.294-6.47-3.013-.603 1.294zm-.925 3.344 6.985 1.469.294-1.398-6.985-1.468-.294 1.397z"/></svg></a></li><li><span style=font-size:small><em>Ultimo aggiornamento: 29/03/2023</em></span></li></ul></div><div class="col-lg text-right"><ul class=list-unstyled><li>Materiale di studio e di esercizio per gli alunni dello Zuccante.</li></ul><div><p><a rel=license href=http://creativecommons.org/licenses/by-nc/4.0/><img style=float:right alt="Creative Commons License" src=https://i.creativecommons.org/l/by-nc/4.0/88x31.png></a></div></p></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js integrity=sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js integrity=sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF crossorigin=anonymous></script></body></html>