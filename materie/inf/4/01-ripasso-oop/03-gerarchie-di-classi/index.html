<!doctype html><html><head><meta charset=utf-8><title>Gerarchie di classi &ndash; Michele Schimd</title><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://cdn.jsdelivr.net/npm/bootswatch@4.5.2/dist/spacelab/bootstrap.min.css rel=stylesheet><link href=https://profschimd.github.io/css/syntax.css rel=stylesheet><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css><script src=https://code.jquery.com/jquery-3.4.1.slim.min.js integrity=sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n crossorigin=anonymous></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></head><body class="d-flex flex-column min-vh-100"><header><nav class="p-1 navbar navbar-expand-lg navbar-dark bg-primary"><div class=container><a class=navbar-brand rel=author href=https://profschimd.github.io/>Michele Schimd</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav ml-auto"><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# role=button data-bs-toggle=dropdown aria-expanded=false>Materie</a><ul class=dropdown-menu aria-labelledby=navbarDropdown><li><a href=https://profschimd.github.io/materie/inf/ class=dropdown-item>Informatica</a></li><li><a href=https://profschimd.github.io/materie/sr/ class=dropdown-item>SR</a></li><li><a href=https://profschimd.github.io/materie/tpsit/ class=dropdown-item>TPSIT</a></li><li><a href=https://profschimd.github.io/materie/gpoi/ class=dropdown-item>GPOI</a></li><li><a href=https://profschimd.github.io/materie/ec/ class=dropdown-item>EC</a></li><li><a href=https://profschimd.github.io/materie/python/ class=dropdown-item>Python</a></li></ul></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# role=button data-bs-toggle=dropdown aria-expanded=false>Classi</a><ul class=dropdown-menu aria-labelledby=navbarDropdown><li><a href=https://profschimd.github.io/classi/4ia/ class=dropdown-item>4IA</a></li><li><a href=https://profschimd.github.io/classi/4ic/ class=dropdown-item>4IC</a></li><li><a href=https://profschimd.github.io/classi/5ic/ class=dropdown-item>5IC</a></li><li><a href=https://profschimd.github.io/classi/5id/ class=dropdown-item>5ID</a></li><li><a href=https://profschimd.github.io/classi/anni-passati/ class=dropdown-item>Anni precedenti</a></li></ul></li><li class=nav-item><a class=nav-link href=https://profschimd.github.io/about/ role=button><i class="bi bi-info-circle"></i></a></li></ul></div></div></nav></header><div class="p-4 bg-primary" style="background-size:cover;background-position:50%;background-image:linear-gradient(to bottom,rgba(0,0,0,.3) 0%,rgba(0,0,0,.6) 100%),url(https://profschimd.github.io/img/zuccante_it.jpeg)"><div class=container><h1 class="display-4 text-white">Gerarchie di classi</h1></div></div><div class=bg-light><nav aria-label="breadcrumb mt-0"><div class=container><ol class=breadcrumb><li class=breadcrumb-item><a href=https://profschimd.github.io/>Home</a></li><li class=breadcrumb-item><a href=https://profschimd.github.io/materie/>Materie</a></li><li class=breadcrumb-item><a href=https://profschimd.github.io/materie/inf/>Informatica</a></li><li class=breadcrumb-item><a href=https://profschimd.github.io/materie/inf/4/>Quarto anno</a></li><li class=breadcrumb-item><a href=https://profschimd.github.io/materie/inf/4/01-ripasso-oop/>Ripasso programmazione ad oggetti</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://profschimd.github.io/materie/inf/4/01-ripasso-oop/03-gerarchie-di-classi/>Gerarchie di classi</a></li></ol></nav></div><div class="container py-5"><main><div class=row><div class=col-10><aside><nav id=TableOfContents><ul><li><a href=#classi-derivate>Classi derivate</a><ul><li><a href=#derivazione-di-classi-in-java>Derivazione di classi in Java</a></li><li><a href=#la-gerarchia-di-classi>La <strong>gerarchia</strong> di classi</a></li><li><a href=#visibilità-protected>Visibilità <code>protected</code></a></li></ul></li><li><a href=#catena-di-costruzione-su-gerarchia>Catena di costruzione su gerarchia</a></li><li><a href=#casting-attraverso-le-classi-della-gerarchia><em>Casting</em> attraverso le classi della gerarchia</a><ul><li><a href=#loperatore-java-instanceof>L&rsquo;operatore Java <code>instanceof</code></a></li></ul></li></ul></nav></aside></div><div class=col-2><a class="btn btn-outline-primary my-1 w-100" href=https://github.com/ProfSchimd/teaching-material/tree/main/inf/oop role=button target=_blank><i class="bi bi-github"></i> Source</a></div></div><article><div class=container style=text-align:justify><h2 id=classi-derivate>Classi derivate</h2><p>Una classe descrive il comportamento di un oggetto, tipicamente come una rappresentazione di
qualcosa che esiste nel mondo reale. Ad esempio la classe <code>Persona</code> contiene informazioni su
<code>nome</code>, <code>cognome</code>, &mldr; insieme alle operazioni (<em>metodi</em>) che la classe persona è in grado
di eseguire, ad esempio <code>introduce()</code>.</p><p>Spesso gli oggetti del mondo reale che si rappresentano cone le classi possono essere di <em>tipo</em>
diverso. Ad esempio una persona può essere uno studente, un professore, un medico o molto altro.
Si potrebbe pensare che per ogni tipo, si debba usare una classe diversa, oppure che si possa
distinguere il tipo utilizzando un campo che distingue i diversi tipi. Queste soluzioni, tuttavia,
presentano aspetti positivi e aspetti negativi. Nella programmazione ad oggetti, esiste un
meccanismo, chiamato <em>ereditarietà</em> che permette di realizzare questo tipo di <em>sottoclassi</em> in
modo da ridurre i problemi delle altre soluzioni.</p><p>Il concetto di <strong>classe derivata</strong> o <strong>sottoclasse</strong> rappresenta uno degli strumenti più utili
e importanti della programmazione ad oggetti. Con la <em>derivazione</em> è possibile aggiungere
funzionalità ad una classe esistente creando una classe che ne <em>specializza</em> un&rsquo;altra.</p><h3 id=derivazione-di-classi-in-java>Derivazione di classi in Java</h3><p>In Java la parola chiave per creare una sotto classe è <code>extends</code> e si usa dopo il nome della
sottoclasse indicando la classe da cui derivare</p><p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Studente</span> <span class=kd>extends</span> <span class=n>Persona</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>}</span></span></span></code></pre></div>Una classe può essere derivata quante volte si vuole</p><p><div class=highlight><pre tabindex=0 class=chroma><code class=language-Java data-lang=Java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Professore</span> <span class=kd>extends</span> <span class=n>Persona</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>}</span></span></span></code></pre></div>Java <strong>non permette l&rsquo;ereditarietà multipla</strong>, cioè più <em>superclassi</em></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=cm>/* Errore: java non permette ereditarietà multipla */</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Professore</span> <span class=kd>extends</span> <span class=n>Persona</span><span class=o>,</span> <span class=n>Dipendente</span> <span class=o>{</span>
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div><div class="alert alert-danger" markdown=1><h5 class="alert-danger no_toc"><i class="bi bi-exclamation-triangle"></i> Attenzione</strong></h5><p><p>In java si possono creare classi senza indicare la superclasse</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Persona</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>}</span></span></span></code></pre></div><p>Tuttavia in questo caso è implicita la derivazione da <code>Object</code>. In altre parole
il codice sopra è equivalente al seguente</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Persona</span> <span class=kd>extends</span> <span class=n>Object</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>}</span></span></span></code></pre></div></p></div><h3 id=la-gerarchia-di-classi>La <strong>gerarchia</strong> di classi</h3><p>Il meccanismo di definizione di sottoclassi (chiamato anche <em>derivazione</em>) genera una
relazione tra le varie classi coinvolte. Questa relazione viene spesso definita
<em>gerarchia di classi</em> perché si presenta come una struttura gerarchica ben definita,
simile all&rsquo;organigramma di un azienda o alla catena di comando di un&rsquo;organizzazione
(es. un corpo militare).</p><div class=row><div class=col-6><div class=mxgraph style="max-width:100%;border:1px solid transparent" data-mxgraph='{"highlight":"#0000ff","nav":true,"resize":true,"toolbar":"zoom layers tags lightbox","edit":"_blank","xml":"<mxfile host=\"app.diagrams.net\" modified=\"2022-09-27T19:18:20.540Z\" agent=\"5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.0 Safari/537.36\" etag=\"oEpI_eopK0UnI-rLAHXG\" version=\"20.2.4\" type=\"google\"><diagram id=\"C5RBs43oDa-KdzZeNtuy\" name=\"Page-1\">7Vpbc9o8EP01PKbjCxjyyCWkSWmHkrZJHxVbYH0RliuLAPn138qW8UVcDJMGmjCTmXiPdd09u0cCanZ3urjmKPS/Mg/TmmV4i5rdq1mWabZs+CeRZYI4ppMAE0481SgD7sgLVqCh0BnxcFRoKBijgoRF0GVBgF1RwBDnbF5sNma0OGuIJlgD7lxEdfSeeMJP0JbVzPDPmEz8dGbTuUzeTFHaWO0k8pHH5jnIvqrZXc6YSJ6miy6m0nmpX+5vlvd08ORc336P/qCfnS8/vv26SAbr79NltQWOA3Hw0C9P4/7nX/X/HsJh//vcuG4/3l6oLsYzojPlryHmEQuQ2rJYpn6M5mRKUQBWZ8wCcafegBc6iJJJAM8uLA9zAJ4xFwRC0FYvBAsBdX1CvQFaspncRCSQ+5RaHZ9x8gLDIgqvTADgNReKTZZTaHEnewJsAMpxBG2GqWfMFTRAkVBtXEYpCiPyGC9YNpkiPiFBhwnBpulAbBZ42FPWKtSxITh7WpFH9q8YDxU36Q28yLFRxecasykWfAlN1FvbUPFQuVZX5jwjrukozM+T1miphFHJMlkNvZptBMmFggn4YDUdzFeYzqw6n+UUp0MU4h4ggTvSi1GehvCQ22kGxeTcg6imRtQ+4RBiy/iGplhjKzhc5JhJ8Vhs5GUUIpcEk0HcplfPkJHasYQY9B3TmBM+8TwcxJwRSKCEVpIoISOBiF3S6MAfOK5rfGrUGrCgLthmZsOfbM5FlwVAL0RiHmHg7BxL3q5h2Nb03c2wZTFy+0Y4T6hCaPeNo6XF8Q5D6ffeayC31BVfTKl6/FvhblhHDrethfsGXC7ImIBQnGP9mrFuto4ca0dPbTGT0dazesNhwjgfJl7vMLFS87T02xXVPcX2O0yYpcOE3Trdw0RTY2qXoih6dwWpYqlxKlPrVE4Rpn6M0IKHA68t749gPVImk7wDkKoCppGYfULTurwjTYs5jT24ZKq5MH1k86sM6MQAvEiJsneSR2zGXbw7YlDWJriCiMjVbo3rukByTJEgz8Vr9JaaMJS8zV0uWsV6cGkXR0j2qDrlr617jpP4QBvn1e4d+gmmR0JgzlnXjqRrdedNdc2uV9C15mnomllfcwSL2UrYRxW3VQL/Q+qmn6Q/lLqlITtpebssVSHnQH2zSwOZTmktrydwDxd/bp1RePPTd0fRQ8+zh8+jdZ8AczbGUcT4Wd9265tWVqrmQeUPge3mR9S3tVzVPwT+CvNxon9b8T7EbQe5NufzSWjb2uX9axc3vCDiQfaFwCXW73QkeO4t8sYyNQLwVK6TNH+r1cRG1i220n5r1ewwXd1W6nfKaqK/byKjDaMso6UidrCMNkpfif1lGdWvie0f7bN+HkE/HeusnxtIql8PB5C6lL7Xy+Eh+rmh9p2KfjbO+nk0/ax6LX1D/ayXLwuXB+pnvaSftlka6GD9BDP7jVTSPPulmX31Pw==</diagram></mxfile>"}'></div><script type=text/javascript src=https://viewer.diagrams.net/js/viewer-static.min.js></script></div><div class=col-6><p>A sinistra si vede il <a href><em>diagramma UML delle classi</em></a> di una semplice gerarchia
di classi alla cui <em>radice</em> troviamo la classe <code>Persona</code>. Per comodità di rappresentazione,
la figura mostro solo alcuni campi delle classi che, ovviamente, avranno anche dei
metodi (getter, setter, costruttori, &mldr;).</p><p>La relazione di sottoclasse viene indicata in UML da una freccia (triangolo vuoto) che
parte dalla sottoclasse e va verso la sua superclasse. Ad esempio dalla classe <code>Dipendente</code>
parte una freccia verso la classe <code>Persona</code> ad indicare che <code>Dipendente</code> è sottoclasse di
<code>Persona</code>.</p><p>Come si vede una <em>gerarchia di classi</em> può avere diversi <em>livelli</em>, ad esempio la classe
<code>Professore</code> è sottoclasse <em>diretta</em> della classe <code>Dipendente</code> ed è sottoclasse <em>indiretta</em>
della classe <code>Persona</code>.</p></div></div><p>Nei casi in cui l&rsquo;ereditarietà sia <em>singola</em>, cioè ogni classe può avere al massima una
sola superclasse, la gerarchia di classi prende spesso la forma di un <em>albero</em> (in senso
informatico, nel qual caso gli alberi sono &ldquo;sotto-sopra&rdquo;). Nell&rsquo;esempio sopra, la <em>radice</em>
dell&rsquo;albero è la classe <code>Persona</code>, le <em>foglie</em> dell&rsquo;albero sono le classi <code>Studente</code>,
<code>Professore</code> e <code>ATA</code>.</p><h4 id=il-metodo-tostring-in-java>Il metodo <code>toString</code> in Java</h4><p>Il fatto che in Java la gerarchia di classi abbia come unico inizio la classe <code>Object</code>,
permette di utilizzare, in ogni classe, i metodi che sono definiti nella stessa classe
<code>Object</code>. Tra gli altri metodi c&rsquo;è il metodo</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=n>String</span> <span class=nf>toString</span><span class=o>()</span> <span class=o>{</span> <span class=o>...</span> <span class=o>}</span></span></span></code></pre></div><p>che restituisce una <code>String</code> che &ldquo;descrive&rdquo; l&rsquo;oggetto. Questo metodo viene usato dal
metodo <code>println</code> usato per stampare a video. In altre parole data una referenza <code>p</code>
ad un oggetto di una qualsiasi classe, le due istruzioni sotto sono equivalenti</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>p</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>p</span><span class=o>.</span><span class=na>toString</span><span class=o>());</span></span></span></code></pre></div><h3 id=visibilità-protected>Visibilità <code>protected</code></h3><p>In certe situazioni può essere utile avere un campo o un metodo non visibili al di
fuori della classe (come se fossero <code>private</code>), ma visibili nelle sottoclassi (come
se fossero <code>public</code>). In queste situazioni è possibile utilizzare il modificatore di
visibilità <code>protected</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Prodotto</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>protected</span> <span class=kt>int</span> <span class=n>id</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Servizio</span> <span class=kd>extends</span> <span class=n>Prodotto</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>int</span> <span class=nf>toString</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Ok perché id è dichiarato &#39;protected&#39; in Prodotto
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>return</span> <span class=s>&#34;Servizio: &#34;</span> <span class=o>+</span> <span class=n>id</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Servizio</span> <span class=n>s</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Servizio</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Errore, questa classe non è sottoclasse di Prodotto
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=c1>// e id non è &#39;public&#39;, quindi non posso accedervi direttamente
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>s</span><span class=o>.</span><span class=na>id</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div><p>Nell&rsquo;esempio sopra vediamo come il campo <code>id</code> della classe <code>Prodotto</code> sia stato
dichiarato <code>protected</code>. Così facendo, la classe <code>Servizio</code> che estende <code>Prodotto</code>
può accedere al campo <code>id</code> (in questo caso all&rsquo;interno del metodo <code>toString</code>).
Al contrario, la classe <code>Main</code> non è sottoclasse di <code>Prodotto</code> quindi <strong>non</strong>
può accedere al campo <code>id</code> (potrebbe se questo fosse <code>public</code>).</p><h2 id=catena-di-costruzione-su-gerarchia>Catena di costruzione su gerarchia</h2><p>La struttura gerarchica di classi, sottoclassi, sottoclassi di sottoclassi, &mldr;
determina una relazione tra le classi stesse. In particolare è utile pensare alla
relazione <strong>is a</strong> (<em>è una</em>) in riferimento al rapporto tra classe e sottoclassi.
Più nello specifico se <code>B</code> è sottoclasse di <code>A</code>, allora <code>B</code> <strong>is a</strong> <code>A</code>, ad
esempio ogni <code>Studente</code> è una <code>Persona</code> e ogni <code>Professore</code> è anche una <code>Persona</code>.
Il contrario non è sempre vero <strong>alcune</strong> <code>Persona</code> sono <code>Studente</code>, ma non tutte;
allo stesso modo <code>Studente</code> <strong>non è</strong> <code>Professore</code> (e viceversa).</p><p>Questo aspetto si riflette anche nel modo in cui le istanze vengono costruite, infatti
se ogni <code>Studente</code> è anche una <code>Persona</code> ne deve avere tutti i campi e i metodi,
perciò quando ci riferiamo a <code>Studente</code> diamo per scontato che campi quali <code>firstName</code>
e <code>birthDate</code> siano già definiti. Per questo motivo quando si istanzia una classe
<strong>vengono chiamati tutti i costruttori di tutte le classi della gerarchia, dalla
più generica, alla più specifica</strong>. In Java l&rsquo;istanziazione di un oggetto della classe
<code>Studente</code> darebbe luogo alla seguente <em>catena di chiamate a costruttori</em>.</p><ol><li><p>Per primo viene chiamato il costruttore di <code>Object</code> in quanto in Java questa
è sempre la classe base di tutte.</p></li><li><p>Successivamente viene chiamato il costruttore di <code>Persona</code> che, se non ha un
<code>extends</code> esplicito, sarà sottoclasse di <code>Object</code>.</p></li><li><p>Infine viene chiamato il costruttore di <code>Studente</code> che è sottoclasse diretta
di <code>Persona</code>.</p></li></ol><p>A titolo di esempio si provi il seguente codice (opportunamente divisa in 3 file come indicato)<div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// file: Persona.java
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Persona</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>Persona</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Costruttore: Persona&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=c1>// file: Studente.java
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Studente</span> <span class=kd>extends</span> <span class=n>Persona</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>Studente</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;Costruttore: Studente&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=c1>// file Main.java
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>public</span> <span class=kd>class</span> <span class=nc>Main</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Studente</span> <span class=n>s</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Studente</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=cm>/*
</span></span></span><span class=line><span class=cl><span class=cm>Output del programma:
</span></span></span><span class=line><span class=cl><span class=cm>
</span></span></span><span class=line><span class=cl><span class=cm>Costruttore: Persona
</span></span></span><span class=line><span class=cl><span class=cm>Costruttore: Studente
</span></span></span><span class=line><span class=cl><span class=cm>*/</span></span></span></code></pre></div></p><h2 id=casting-attraverso-le-classi-della-gerarchia><em>Casting</em> attraverso le classi della gerarchia</h2><p>Sempre in virtù della relazione <strong>is a</strong>, i vari linguaggi orientati agli
oggetti permettono di convertire (<em>casting</em>) un tipo in un altro purché
il primo sia in relazione <strong>is a</strong> con il secondo. Ad esempio è sempre
possibile convertire uno <code>Studente</code> in una <code>Persona</code>, in Java questa conversione
avviene in maniera <em>implicita</em></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Studente</span> <span class=n>s</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Studente</span><span class=o>();</span> <span class=c1>// Creo un&#39;istanza di Studente
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Persona</span> <span class=n>p</span> <span class=o>=</span> <span class=n>s</span><span class=o>;</span> <span class=c1>// Nessun errore, cast implicito
</span></span></span></code></pre></div><p>Ovviamente il tentativo di convertire un tipo generico, ad esempio <code>Persona</code>, in
un tipo più specifico, ad esempio <code>Studente</code>, non va a buon fine.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// Creo Studente e subito faccio cast implicito
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Persona</span> <span class=n>p</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Studente</span><span class=o>();</span> 
</span></span><span class=line><span class=cl><span class=n>Studente</span> <span class=n>s</span> <span class=o>=</span> <span class=n>p</span><span class=o>;</span> <span class=c1>// Errore, cast implicito non possibile
</span></span></span></code></pre></div><p>D&rsquo;altro canto, se questo cast non fosse segnalato come errore si potrebbero fare
delle operazioni senza significato come nel seguente frammento di codice.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// Creo Studente e subito faccio cast esplicito
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Persona</span> <span class=n>p</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Studente</span><span class=o>();</span> 
</span></span><span class=line><span class=cl><span class=n>Professore</span> <span class=n>s</span> <span class=o>=</span> <span class=n>p</span><span class=o>;</span> <span class=c1>// non ha senso!
</span></span></span></code></pre></div><p>In certi casi, tuttavia, può essere utile la conversione da tipo generale a tipo
specifico; Java permette di fare questa conversione purché venga resa <em>esplicita</em>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Persona</span> <span class=n>p</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Studente</span><span class=o>();</span> 
</span></span><span class=line><span class=cl><span class=n>Studente</span> <span class=n>s</span> <span class=o>=</span> <span class=o>(</span><span class=n>Studente</span><span class=o>)</span><span class=n>p</span><span class=o>;</span> <span class=c1>// Ok, cast esplicito
</span></span></span></code></pre></div><p>Bisogna stare attenti tuttavia che questo cast esplicito può fallire in fase di
esecuzione (in <em>runtime</em>) in quanto non è sempre possibile.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// Creo Studente e subito faccio cast esplicito
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>Persona</span> <span class=n>p</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Studente</span><span class=o>();</span> 
</span></span><span class=line><span class=cl><span class=n>Professore</span> <span class=n>s</span> <span class=o>=</span> <span class=o>(</span><span class=n>Studente</span><span class=o>)</span><span class=n>p</span><span class=o>;</span> <span class=c1>// compila, ma genera un&#39;eccezione in fase di esecuzione
</span></span></span></code></pre></div><h3 id=loperatore-java-instanceof>L&rsquo;operatore Java <code>instanceof</code></h3><p>Il linguaggio Java (come altri) permette di verificare in fase di esecuzione, se una
referenza è una <em>istanza</em> di una classe specificata. Questo permette di evitare le
eccezioni dovute ad un erroneo utilizzo del cast esplicito visto sopra. L&rsquo;operatore
<code>instanceof</code> permette questo test ad accetta una referenza a sinistra ed il nome di una
classe a destra</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>Persona</span> <span class=n>p</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Studente</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>((</span><span class=n>p</span> <span class=k>instanceof</span> <span class=n>Persona</span><span class=o>));</span> <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>((</span><span class=n>p</span> <span class=k>instanceof</span> <span class=n>Studente</span><span class=o>));</span> <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>((</span><span class=n>p</span> <span class=k>instanceof</span> <span class=n>Professore</span><span class=o>));</span> <span class=c1>// false
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>((</span><span class=n>p</span> <span class=k>instanceof</span> <span class=n>Object</span><span class=o>));</span> <span class=c1>// True qualsiasi classe sia p
</span></span></span></code></pre></div><p>Si noti come <code>instanceof</code> esegue un test su tutta la gerarchia, infatti viene valutato
<code>true</code> un&rsquo;istanza di <code>Studente</code> sia nel test con <code>Studente</code> sia nel test con <code>Persona</code>.</p><p>Vale la pena dire che <code>instanceof</code> ha un comportamento non sempre intuitivo, infatti
tutte e tre i test nel codice seguente danno esito <code>true</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>       
</span></span><span class=line><span class=cl>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>args</span> <span class=k>instanceof</span> <span class=n>String</span><span class=o>[]);</span> <span class=c1>// true (ovvio)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>args</span> <span class=k>instanceof</span> <span class=n>Object</span><span class=o>);</span> <span class=c1>// true (sospettoso)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>args</span> <span class=k>instanceof</span> <span class=n>Object</span><span class=o>[]);</span> <span class=c1>// true (i can see that!)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>}</span></span></span></code></pre></div></div></article><nav class="mx-5 my-3"><div class=card><h5 class=card-header>Indice di Ripasso programmazione ad oggetti</h5><ul class="list-group list-group-flush"><li class=list-group-item><a href=https://profschimd.github.io/materie/inf/4/01-ripasso-oop/01-oop-concetti-base/>Concetti base programmazione ad oggetti</a></li><li class=list-group-item><a href=https://profschimd.github.io/materie/inf/4/01-ripasso-oop/02-campi-metodi/>Campi e metodi di un oggetto</a></li><li class="list-group-item list-group-item-primary"><strong><a href=https://profschimd.github.io/materie/inf/4/01-ripasso-oop/03-gerarchie-di-classi/>> Gerarchie di classi</a></strong></li><li class=list-group-item><a href=https://profschimd.github.io/materie/inf/4/01-ripasso-oop/04-interfacce/>Interfacce e API</a></li></ul><div class=card-footer><a class="btn btn-primary" href=https://profschimd.github.io/materie/inf/4/01-ripasso-oop/>Index</a></div></div></nav></main></div><div class="py-3 border-top bg-light mt-auto"><div class=container><div class=row><div class=col-sm><ul class=list-unstyled><li>Michele Schimd &copy; 2023</li><li><a class=pr-1 href=mailto:michele.schimd@itiszuccante.edu.it><svg xmlns="http://www.w3.org/2000/svg" width="1.5em" fill="currentcolor" class="bi bi-at" viewBox="0 0 16 16"><path d="M.05 3.555A2 2 0 012 2h12a2 2 0 011.95 1.555L8 8.414.05 3.555zM0 4.697v7.104l5.803-3.558L0 4.697zM6.761 8.83.191 12.857A2 2 0 002 14h12a2 2 0 001.808-1.144l-6.57-4.027L8 9.586l-1.239-.757zm3.436-.586L16 11.801V4.697l-5.803 3.546z"/></svg></a><a class=pr-1 rel=me href=https://github.com/ProfSchimd target=_blank title=ProfSchimd alt=GitHub><svg xmlns="http://www.w3.org/2000/svg" width="1.5em" fill="currentcolor" class="bi bi-github" viewBox="0 0 16 16"><path d="M8 0C3.58.0.0 3.58.0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38.0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95.0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12.0.0.67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15.0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48.0 1.07-.01 1.93-.01 2.2.0.21.15.46.55.38A8.012 8.012.0 0016 8c0-4.42-3.58-8-8-8z"/></svg></a><a class=pr-1 rel=me href=https://www.linkedin.com/in/michele-schimd-44a85160 target=_blank title=michele-schimd-44a85160 alt=Linkedin><svg xmlns="http://www.w3.org/2000/svg" width="1.5em" fill="currentcolor" class="bi bi-linkedin" viewBox="0 0 16 16"><path d="M0 1.146C0 .513.526.0 1.175.0h13.65C15.474.0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487.0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837.0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822.0-1.359.54-1.359 1.248.0.694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869.0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274.0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54.0 01.016-.025V6.169h-2.4c.03.678.0 7.225.0 7.225h2.4z"/></svg></a><a class=pr-1 rel=me href=https://stackoverflow.com/users/18081937 target=_blank title=18081937><svg xmlns="http://www.w3.org/2000/svg" width="1.5em" fill="currentcolor" class="bi bi-stack-overflow" viewBox="0 0 16 16"><path d="M12.412 14.572V10.29h1.428V16H1v-5.71h1.428v4.282h9.984z"/><path d="M3.857 13.145h7.137v-1.428H3.857v1.428zM10.254.0 9.108.852l4.26 5.727 1.146-.852L10.254.0zm-3.54 3.377 5.484 4.567.913-1.097L7.627 2.28l-.914 1.097zM4.922 6.55l6.47 3.013.603-1.294-6.47-3.013-.603 1.294zm-.925 3.344 6.985 1.469.294-1.398-6.985-1.468-.294 1.397z"/></svg></a></li><li><span style=font-size:small><em>Ultimo aggiornamento: 12/01/2023</em></span></li></ul></div><div class="col-lg text-right"><ul class=list-unstyled><li>Materiale di studio e di esercizio per gli alunni dello Zuccante.</li></ul><div><p><a rel=license href=http://creativecommons.org/licenses/by-nc/4.0/><img style=float:right alt="Creative Commons License" src=https://i.creativecommons.org/l/by-nc/4.0/88x31.png></a></div></p></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js integrity=sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js integrity=sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF crossorigin=anonymous></script></body></html>